#!/bin/bash
# shellcheck disable=1090

# Activate the virtualenv located in the current, or one of the parent
# directories by sourcing this script. Accepts a parameter for the virtualenv
# name, default to venv.

VENV="${1:-venv}"

slashes=${PWD//[^\/]/}
DIR="$PWD"
for (( n=${#slashes}; n>1; --n ))
do
    if [ -d "$DIR/$VENV" ]; then
        source "$DIR/$VENV/bin/activate"
    else
        DIR="$DIR/.."
    fi
done
